# Anki单词卡片生成器 - Web界面使用说明

## 🌟 概述

本项目提供了两个Web界面版本：

1. **完整版** (Flask应用) - 功能完整的Web应用
2. **简化版** (纯Python) - 仅用于演示的简化版本

## 🚀 快速启动

### 方式一：简化演示版（推荐首次使用）

```bash
# 进入项目目录
cd "anki-word-card-generator"

# 启动简化Web服务器
python3 web/simple_server.py

# 在浏览器中访问
open http://localhost:8000
```

### 方式二：完整版Flask应用

```bash
# 安装完整依赖
pip install -r requirements.txt

# 配置API密钥（编辑config.yaml）
# 将 "sk-your-real-api-key-here" 替换为您的真实API密钥

# 启动Flask应用
python3 web/app.py

# 在浏览器中访问
open http://localhost:5000
```

## 🎯 主要功能

### 1. 单词选择方式

#### 内置词库
- ✅ 随机选择单词
- ✅ 按分类选择（情感、能力、状态等）
- ✅ 按难度选择（easy、medium、hard等）
- ✅ 可选择数量（1-50个）

#### 外部词库上传
- 📁 支持 TXT、CSV、JSON 格式
- 📁 拖拽上传或点击选择
- 📁 实时预览文件内容
- 📁 自动提取单词列表

#### 手动输入
- ✅ 文本框输入，每行一个单词
- ✅ 实时验证单词格式
- ✅ 最多支持50个单词

### 2. 智能生成

#### 配置信息显示
- 📊 显示当前模型提供商（OpenAI、Anthropic等）
- 📊 显示模型名称（GPT-4、Claude等）
- 📊 显示生成规则（例句数量、同义词数量等）

#### 生成控制
- 🚀 一键开始生成
- 📊 实时进度显示
- 🔄 错误自动重试
- ⚙️ 批处理设置

#### 预览功能
- 👁️ 生成前预览前3个单词
- 📋 查看详细卡片内容
- 🎯 确认后再批量生成

### 3. 结果展示

#### 生成统计
- ✅ 成功生成数量
- ❌ 生成失败数量
- 📊 详细成功率统计
- 📋 失败单词列表

#### 卡片展示
- 📱 美观的卡片布局
- 🎨 颜色分类标识
- 📱 完整信息展示
- 📱 响应式设计

### 4. 导出功能

#### 支持格式
- 📄 **CSV格式** - Anki标准格式，可直接导入
- 📦 **APKG格式** - Anki牌组文件，双击即可导入
- 📚 **学习指南格式** - 适合打印和学习的格式

#### 导出选项
- 📥 一键下载
- 📝 自动文件命名（包含时间戳）
- 🌐 支持中文文件名
- 📊 批量导出支持

## 🎨 界面特色

### 视觉设计
- 🎨 现代化Bootstrap设计
- 📱 完全响应式布局
- 🌙 支持深色/浅色模式
- ✨ 流畅的动画效果

### 用户体验
- 🖱️ 拖拽上传文件
- 📊 实时进度反馈
- 🔄 无刷新操作
- 📱 移动端友好

### 交互设计
- 🎯 直观的操作流程
- 💡 清晰的状态提示
- ⚠️ 友好的错误处理
- 🎉 成功操作反馈

## 🔧 技术架构

### 前端技术
- **HTML5** - 语义化结构
- **Bootstrap 5** - UI框架和组件
- **JavaScript ES6+** - 交互逻辑
- **CSS3** - 样式和动画
- **响应式设计** - 移动端适配

### 后端技术
- **Python 3.8+** - 主要开发语言
- **Flask** - Web框架（完整版）
- **HTTP Server** - 内置服务器（简化版）
- **CORS支持** - 跨域请求处理
- **文件上传** - 多格式支持

### 核心集成
- **大模型API** - OpenAI、Anthropic等
- **数据验证** - Pydantic模型验证
- **导出引擎** - CSV、APKG格式支持
- **词库管理** - 内置+外部词库

## 📋 使用步骤详解

### 第一步：配置准备

1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

2. **设置API密钥**
   - 编辑 `config.yaml` 文件
   - 找到 `llm_config.api_key`
   - 替换为您的真实API密钥

3. **验证配置**
   ```bash
   python cli/main.py init
   ```

### 第二步：启动Web界面

1. **启动服务器**
   ```bash
   # 简化版（推荐新手）
   python3 web/simple_server.py

   # 或完整版（需要依赖安装完成）
   python3 web/app.py
   ```

2. **访问界面**
   - 打开浏览器
   - 访问 `http://localhost:8000` 或 `http://localhost:5000`

### 第三步：生成卡片

1. **选择单词**
   - 切换到"内置词库"标签
   - 选择"随机选择"
   - 设置数量为5-10个
   - 点击"加载单词"

2. **预览生成**
   - 查看加载的单词列表
   - 点击"预览"按钮
   - 检查生成质量

3. **确认生成**
   - 关闭预览窗口
   - 点击"开始生成"
   - 等待生成完成

### 第四步：导出使用

1. **选择格式**
   - CSV格式（推荐Anki用户）
   - APKG格式（最方便）
   - 学习指南格式（适合学习）

2. **下载文件**
   - 点击对应格式按钮
   - 自动下载到本地

3. **导入Anki**
   - 打开Anki软件
   - 选择"文件" → "导入"
   - 选择下载的文件
   - 按提示完成导入

## 🔍 故障排除

### 常见问题

#### 1. 服务器启动失败
```bash
# 检查端口是否被占用
lsof -i :8000

# 尝试其他端口
python3 web/simple_server.py  # 默认8000端口

# 检查Python版本
python3 --version  # 需要3.8+
```

#### 2. 网页无法访问
- 检查防火墙设置
- 确认服务器正在运行
- 尝试 `http://127.0.0.1:8000`

#### 3. 文件上传失败
- 检查文件大小（最大16MB）
- 确认文件格式（TXT、CSV、JSON）
- 检查浏览器控制台错误

#### 4. 生成功能异常
- 验证API密钥配置
- 检查网络连接
- 查看日志文件 `logs/app.log`

#### 5. 导出失败
- 确认先生成了卡片
- 检查浏览器下载设置
- 尝试其他导出格式

### 性能优化

#### 服务器优化
```bash
# 增加并发处理
# 编辑 config.yaml 中的 batch_size

# 调整超时设置
# 修改 timeout 参数
```

#### 浏览器优化
- 推荐使用现代浏览器（Chrome、Firefox、Safari）
- 清空浏览器缓存
- 禁用广告拦截器

## 🎯 进阶使用

### 自定义配置

编辑 `config.yaml` 文件：

```yaml
# 调整生成质量
llm_config:
  temperature: 0.5    # 降低随机性，提高一致性
  max_tokens: 3000   # 增加内容长度

# 自定义导出设置
export_settings:
  deck_name: "我的英语单词牌组"
  csv_delimiter: ";"
```

### 批量操作

1. **生成多个批次**
   - 第一批：高频词汇
   - 第二批：专业词汇
   - 第三批：考试词汇

2. **合并导出**
   - 在Anki中合并多个牌组
   - 使用标签进行分类管理

3. **定期更新**
   - 每周生成新单词
   - 每月整理牌组
   - 跟踪学习进度

## 📞 技术支持

### 获取帮助
- 📖 **详细文档**：查看 `README.md`
- 🐛 **问题反馈**：提交GitHub Issue
- 💬 **讨论交流**：参与项目讨论

### 贡献代码
- 🍴 **Fork项目**
- 🌟 **创建功能分支**
- 💻 **提交代码变更**
- 📤 **提交Pull Request**

### 版本更新
- 🔄 定期检查更新
- 📥 备份配置文件
- 🚀 升级到最新版本

---

## 🎉 总结

Web界面为Anki单词卡片生成器提供了直观易用的操作界面。通过简单的点击和拖拽操作，您就可以：

1. 📚 **快速选择** - 内置词库或外部文件
2. 🤖 **智能生成** - 基于大模型API
3. 📊 **实时监控** - 生成进度和结果
4. 📤 **便捷导出** - 多格式支持
5. 🎯 **高效学习** - 完整的单词卡片

现在就开始您的智能英语学习之旅吧！🚀